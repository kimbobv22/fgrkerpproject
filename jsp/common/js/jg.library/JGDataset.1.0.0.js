(function(c){if($===undefined||$==null){console.error("can't not initialize JGDataset, JQuery not found");return;}Object.isNull=(function(f){return(f===undefined||f==null);});Object.NVL2=(function(f,h,g){return(!this.isNull(f)?h:g);});Object.NVL=(function(f,g){return this.NVL2(f,f,g);});String.isBlank=(function(){return(this.length===0);});Array.prototype.indexOf=(function(g){var f=this.length;for(var h=0;h<f;++h){if(this[h]===g){return h;}}return -1;});Array.prototype.insert=(function(f,g){this.splice(g,0,f);});Array.prototype.remove=(function(f){this.splice(f,1);});Array.prototype.removeAll=(function(f){this.splice(0,this.length);});Array.prototype.removeObject=(function(f){this.remove(this.indexOf(f));});Array.prototype.move=function(f,h){if(h>=this.length){var g=h-this.length;while((--g)+1){this.push(undefined);}}this.splice(h,0,this.splice(f,1)[0]);};Array.prototype.clone=(function(){return this.slice(0);});$.fn.insertAtIndex=(function(g,h){var f=this.children().size();if(h<0){h=Math.max(0,f+1+h);}this.append(g);if(h<f){this.children().eq(h).before(this.children().last());}return this;});var a=c.JGDatasetColumn=(function(f){this.name=f.toUpperCase();this._isKey=false;});a.prototype.getName=(function(){return this.name;});a.prototype.setName=(function(f){this.name=f;});a.prototype.isKey=(function(){return this._isKey;});a.prototype.setKey=(function(f){this._isKey=f;});var e=c.JGDatasetRow=(function(){this._columns={};this._orgColumns={};this._columnStatus={};this._rowStatus=c.JGDatasetRow.prototype.ROWSTATUS_NORMAL;});e.prototype.getRowStatus=(function(){return this._rowStatus;});e.prototype.setRowStatus=(function(f){this._rowStatus=f;});e.prototype._updateRowStatus=(function(){if(this._rowStatus==e.prototype.ROWSTATUS_INSERT){return;}var g=false;for(var f in this._columnStatus){if(Object.NVL(this._columnStatus[f],false)){g=true;break;}}this._rowStatus=(g?e.prototype.ROWSTATUS_UPDATE:e.prototype.ROWSTATUS_NORMAL);});e.prototype.setColumn=(function(h,f,g){h=h.toUpperCase();this._columns[h]=f;if(Object.isNull(g)){this._columnStatus[h]=(this._orgColumns[h]!=f);}else{this._columnStatus[h]=g;}this._updateRowStatus();});e.prototype.removeColumn=(function(f){delete this._columns[f.toUpperCase()];});e.prototype.getColumnValue=(function(f){return this._columns[f.toUpperCase()];});e.prototype.isColumnModified=(function(g){var f=this._columnStatus[g.toUpperCase()];return Object.NVL2(f,false,f);});e.prototype.setColumnModification=(function(g,f){this._columnStatus[g.toUpperCase()]=f;});e.prototype.apply=(function(){this._orgColumns={};this._orgColumns=JSON.parse(JSON.stringify(this._columns));this._rowStatus=e.prototype.ROWSTATUS_NORMAL;this._columnStatus={};});e.prototype.reset=(function(){this._columns={};this._columns=JSON.parse(JSON.stringify(this._orgColumns));this._rowStatus=e.prototype.ROWSTATUS_NORMAL;this._columnStatus={};});e.prototype.ROWSTATUS_NORMAL=0;e.prototype.ROWSTATUS_INSERT=1;e.prototype.ROWSTATUS_UPDATE=3;var b=c.JGDataset=(function(f){this._columnInfo=new Array();this._orgColumnInfo=new Array();this._rowData=new Array();this._orgRowData=new Array();this._deletedRowData=new Array();this._mappingTarget=null;this._mappingRowContents=null;this._mappingRowList=new Array();this._mappingElementsList=new Array();this._mappingFxElementsList=new Array();this._autoFillSelectList=new Array();$(this).on(c.JGDataset.prototype._customTriggerKey_whenRowInserted,function(h,i,g){if(g){$(this).trigger(c.JGDataset.prototype._defaultTriggerKey_whenRowInserted,i);}this._addMappingElements(i);this._updateAutoFillToSelect();});$(this).on(c.JGDataset.prototype._customTriggerKey_whenRowRemoved,function(g,h){$(this).trigger(c.JGDataset.prototype._defaultTriggerKey_whenRowRemoved,h);this._removeMappingElements(h);this._updateAutoFillToSelect();});$(this).on(c.JGDataset.prototype._customTriggerKey_whenColumnAdded,function(g,h){$(this).trigger(c.JGDataset.prototype._defaultTriggerKey_whenColumnAdded,h);});$(this).on(c.JGDataset.prototype._customTriggerKey_whenColumnRemoved,function(g,h){$(this).trigger(c.JGDataset.prototype._defaultTriggerKey_whenColumnRemoved,h);});$(this).on(c.JGDataset.prototype._customTriggerKey_whenColumValueChanged,function(h,j,i,g){if(g){$(this).trigger(c.JGDataset.prototype._defaultTriggerKey_whenColumValueChanged,[j,i]);}this._refreshColumnMappingElements(j,i);this._updateAutoFillToSelect();});$(this).on(c.JGDataset.prototype._customTriggerKey_whenDatasetClear,function(h,g){if(g){$(this).trigger(c.JGDataset.prototype._defaultTriggerKey_whenDatasetClear);}this.reloadMappingElements();this._updateAutoFillToSelect();});$(this).on(c.JGDataset.prototype._customTriggerKey_whenDatasetReset,function(g){$(this).trigger(c.JGDataset.prototype._defaultTriggerKey_whenDatasetReset);this.reloadMappingElements();this._updateAutoFillToSelect();});$(this).on(c.JGDataset.prototype._customTriggerKey_whenDatasetChanged,function(h,g){if(g){$(this).trigger(c.JGDataset.prototype._defaultTriggerKey_whenDatasetChanged);}this.reloadMappingElements();this._updateAutoFillToSelect();});if(!Object.isNull(f)){this.applyJSON(f);}});b.prototype._convertColumnKeyToName=(function(f){return($.type(f)==="number"?this.getColumn(f).name:f);});b.prototype._convertColumnKeyToIndex=(function(f){return($.type(f)==="number"?f:this.indexOfColumn(f));});b.prototype.getColumnCount=(function(){return this._columnInfo.length;});b.prototype.getRowCount=(function(){return this._rowData.length;});b.prototype.getDeletedRowCount=(function(){return this._deletedRowData.length;});b.prototype.insertColumn=(function(l,i,f){var g=new a(l);this._columnInfo[i]=g;var k=this._rowData.length;for(var h=0;h<k;++h){var j=this._rowData[h];j.setColumn(l,null);}k=this._deletedRowData.length;for(var h=0;h<k;++h){var j=this._deletedRowData[h];j.setColumn(l,null);}if(Object.NVL(f,true)){this.reloadMappingElements();$(this).trigger(b.prototype._customTriggerKey_whenColumnAdded,l);}return g;});b.prototype.addColumn=(function(g,f){return this.insertColumn(g,this._columnInfo.length,f);});b.prototype.addColumns=(function(){var f=arguments.length;for(var g=0;g<f;++g){this.addColumn(arguments[g]);}});b.prototype.removeColumn=(function(f){f=this._convertColumnKeyToIndex(f);var g=this.getColumn(f).name;this._columnInfo.splice(f,1);this.reloadMappingElements();$(this).trigger(b.prototype._customTriggerKey_whenColumnRemoved,g);});b.prototype.getColumn=(function(f){f=this._convertColumnKeyToIndex(f);return this._columnInfo[f];});b.prototype.indexOfColumn=(function(h){var f=this._columnInfo.length;for(var g=0;g<f;++g){if(this._columnInfo[g].name==h.toUpperCase()){return g;}}return -1;});b.prototype.createRow=(function(g){var i=new e();i.setRowStatus(g);var j=this._columnInfo.length;for(var h=0;h<j;++h){var f=this._columnInfo[h];i.setColumn(f.name,null);}return i;});b.prototype._insertRow=(function(f){this._rowData.insert(this.createRow(e.prototype.ROWSTATUS_INSERT),f);});b.prototype.insertRow=(function(f){this._insertRow(f);$(this).trigger(b.prototype._customTriggerKey_whenRowInserted,[f,true]);});b.prototype.addRow=(function(){var f=this._rowData.length;this.insertRow(f);return f;});b.prototype._removeRow=(function(f){var g=this.getRow(f);switch(g.getRowStatus()){case e.prototype.ROWSTATUS_NORMAL:case e.prototype.ROWSTATUS_UPDATE:this._deletedRowData.push(g);break;case e.prototype.ROWSTATUS_INSERT:default:break;}this._rowData.remove(f);});b.prototype.removeRow=(function(f){$(this).trigger(b.prototype._customTriggerKey_whenRowRemoved,f);this._removeRow(f);});b.prototype.getRow=(function(f){return this._rowData[f];});b.prototype.setRowStatus=(function(f,g){this.getRow(f).setRowStatus(g);});b.prototype.getRowStatus=(function(f){return this.getRow(f).getRowStatus();});b.prototype.getDeletedRow=(function(f){return this._deletedRowData[f];});b.prototype.moveRow=(function(f,g){this._rowData.move(f,g);this._updateMappingElements(f);this._updateMappingElements(g);});b.prototype.sortRow=(function(g,h){var j=this._convertColumnKeyToName(g);var i=this.getRowCount();this._rowData.sort(function(l,k){return h.apply(this,[l.getColumnValue(j),k.getColumnValue(j)]);});for(var f=0;f<i;++f){this._updateMappingElements(f);}});b.prototype.sortRowByAsc=(function(f){this.sortRow(f,function(h,g){return h-g;});});b.prototype.sortRowByDesc=(function(f){this.sortRow(f,function(h,g){return g-h;});});b.prototype._setColumnValue=(function(k,j,g,f,h){if($.type(k)==="number"){var i=this.getColumn(k);k=i.name;}else{var l=this.indexOfColumn(k);if(l<0){if(!Object.NVL(f,false)){console.error("not exists column ["+k+"]");}else{this.addColumn(k,h);}}}var m=this.getRow(j);m.setColumn(k,g);});b.prototype.setColumnValue=(function(j,i,h,g){j=this._convertColumnKeyToName(j);var f=this.getColumnValue(j,i);this._setColumnValue(j,i,h,g);if(f!=h){$(this).trigger("change",[j,i]);$(this).trigger(b.prototype._customTriggerKey_whenColumValueChanged,[j,i,true]);}});b.prototype.setColumnValues=(function(i,g,f){var h=g.length;for(var j=0;j<h;j+=2){this.setColumnValue(g[j],i,g[j+1],f);}});b.prototype.getColumnValue=(function(g,f){return this.getRow(f).getColumnValue(this._convertColumnKeyToName(g));});b.prototype.isColumnModified=(function(g,f){return this.getRow(f).isColumnModified(this._convertColumnKeyToName(g));});b.prototype.getDeletedColumnValue=(function(g,f){return this.getDeletedRow(f).getColumnValue(this._convertColumnKeyToName(g));});b.prototype.clear=(function(f){if(Object.NVL(f,true)){this._columnInfo=new Array();}this._rowData=new Array();this._deletedRowData=new Array();$(this).trigger(b.prototype._customTriggerKey_whenDatasetClear,Object.NVL(arguments[1],true));});b.prototype.apply=(function(){var h=this._rowData.length;for(var f=0;f<h;++f){var g=this.getRow(f);g.apply();}this._deletedRowData=new Array();this._orgRowData=this._rowData.clone();this._orgColumnInfo=this._columnInfo.clone();});b.prototype.reset=(function(){this._rowData=new Array();this._deletedRowData=new Array();this._rowData=this._orgRowData.clone();this._columnInfo=this._orgColumnInfo.clone();$(this).trigger(b.prototype._customTriggerKey_whenDatasetReset);});b.prototype.isModified=(function(){var g=this.getRowCount();for(var f=0;f<g;++f){if(this.getRowStatus(f)!=e.prototype.ROWSTATUS_NORMAL){return true;}}return false;});b.prototype.sumOfColumnValues=(function(j,i){var g=0;var l=this.getRowCount();var f=this.getColumn(j);for(var h=0;h<l;++h){if(Object.NVL2(i,i,function(){return true;})(f.name,h)){var k=this.getColumnValue(f.name,h);g+=(Object.isNull(k)||isNaN(k)?0:new Number(k));}}return g;});b.prototype.avgOfColumnValues=(function(h,g){var f=this.sumOfColumnValues(h,g);var j=this.getRowCount();var i=(f/j);return isNaN(i)?0:i;});b.prototype._calcOfColumnValues=(function(i,j,h){var l=undefined;var k=this.getRowCount();var f=this.getColumn(i);for(var g=0;g<k;++g){var m=this.getColumnValue(f.name,g);if(Object.isNull(m)||isNaN(m)||!Object.NVL2(h,h,function(){return true;})(f.name,g)){continue;}if(Object.isNull(l)||new Function("return ("+l+j+m+");").apply(this)){l=m;}}return l;});b.prototype.maxOfColumnValues=(function(g,f){return this._calcOfColumnValues(g,"<",f);});b.prototype.minOfColumnValues=(function(g,f){return this._calcOfColumnValues(g,">",f);});b.prototype.toJSON=(function(g){if(Object.NVL(g,false)){var u=new Array();var r=this._rowData.length;var i=this._columnInfo.length;for(var s=0;s<r;++s){var p=this._rowData[s];var t={};for(var j=0;j<i;++j){var m=this._columnInfo[j];t[m.name]=p.getColumnValue(m.name);}u.push(t);}return u;}else{var q={};var n=new Array();var i=this._columnInfo.length;for(var j=0;j<i;++j){var m=this._columnInfo[j];var f={};f[b.prototype.STR_NAME]=m.name;f[b.prototype.STR_ISKEY]=m.isKey();n[j]=f;}q[b.prototype.STR_COLUMNINFO]=n;var l=new Array();var r=this._rowData.length;for(var s=0;s<r;++s){var p=this._rowData[s];var t={};var o={};for(var j=0;j<i;++j){var m=this._columnInfo[j];var f={};f[b.prototype.STR_VALUE]=this.getColumnValue(m.name,s);f[b.prototype.STR_MODIFY]=p.isColumnModified(m.name);o[m.name]=f;}t[b.prototype.STR_ROW]=o;t[b.prototype.STR_ROWSTATUS]=p.getRowStatus();l[s]=t;}q[b.prototype.STR_ROWDATA]=l;var h=new Array();r=this._deletedRowData.length;for(var s=0;s<r;++s){var t={};var o={};for(var j=0;j<i;++j){var m=this._columnInfo[j];var k=this.getDeletedColumnValue(m.name,s);var f={};f[b.prototype.STR_VALUE]=k;o[m.name]=f;}t[b.prototype.STR_ROW]=o;h[s]=t;}q[b.prototype.STR_ROWDATA_DELETED]=h;return q;}});b.prototype.toJSONString=(function(f){return JSON.stringify(this.toJSON(f));});b.prototype.applyJSON=(function(f){f=($.type(f)=="string"?JSON.parse(f):f);this.clear(true,false);if(f[b.prototype.STR_COLUMNINFO]===undefined){var q=f.length;for(var r=0;r<q;++r){this._insertRow(r);for(var n in f[r]){this._setColumnValue(n,r,f[r][n],true,false);}}this.apply();}else{var o=f[b.prototype.STR_COLUMNINFO];var l=f[b.prototype.STR_ROWDATA];var h=f[b.prototype.STR_ROWDATA_DELETED];var j=o.length;for(var i=0;i<j;++i){var g=o[i];var m=this.addColumn(g[b.prototype.STR_NAME]);m.setKey(g[b.prototype.STR_ISKEY]);}var q=l.length;for(var r=0;r<q;++r){var p=this.getRow(this.addRow());var s=l[r][b.prototype.STR_ROW];for(var i=0;i<j;++i){var m=this.getColumn(i);var k=s[m.name];p.setColumn(m.name,k[b.prototype.STR_VALUE],k[b.prototype.STR_MODIFY]);}p.setRowStatus(l[r][b.prototype.STR_ROWSTATUS]);}q=h.length;for(var r=0;r<q;++r){var p=new e();this._deletedRowData[this._deletedRowData.length]=p;var s=h[r][b.prototype.STR_ROW];for(var i=0;i<j;++i){var m=this.getColumn(i);var k=s[m.name];p.setColumn(m.name,k[b.prototype.STR_VALUE]);}}}$(this).trigger(b.prototype._customTriggerKey_whenDatasetChanged,Object.NVL(arguments[1],true));});b.prototype.appendDataset=(function(f,g){var n=f.getRowCount();var i=f.getColumnCount();for(var o=0;o<n;++o){var m=this.createRow(e.prototype.ROWSTATUS_INSERT);var k=f.getRow(o);m.setRowStatus(k.getRowStatus());var j=this.getRowCount();this._rowData.insert(m,j);for(var h=0;h<i;++h){var l=f.getColumn(h).getName();this._setColumnValue(l,j,k.getColumnValue(l),g,false);m.setColumnModification(l,k.isColumnModified(l));}$(this).trigger(b.prototype._customTriggerKey_whenRowInserted,[j,true]);}});b.prototype.appendJSON=(function(g,f){g=($.type(g)=="string"?JSON.parse(g):g);this.appendDataset(new b(g),f);});b.prototype.addSelectForAutoFill=(function(f,g,h){this._autoFillSelectList.push({select:$(f),displayColumnName:g,valueColumnName:h});this._updateAutoFillToSelect();});b.prototype.removeSelectForAutoFill=(function(f){if(Object.isNull(f)){this._autoFillSelectList=new Array();return;}var i=this._autoFillSelectList.length;for(var h=0;h<i;++h){var g=this._autoFillSelectList[h];if($(g.select).is(f)){this._autoFillSelectList.remove(h);return;}}});b.prototype._updateAutoFillToSelect=(function(){var i=this._autoFillSelectList.length;if(i===0){return;}for(var h=0;h<i;++h){var g=this._autoFillSelectList[h];if(Object.isNull(g.select)||Object.isNull(g.select.parent())){this.removeSelectForAutoFill(h);--h;}this.fillOptionToSelect(g.select,g.displayColumnName,g.valueColumnName);try{g.select.selectmenu("refresh",true);}catch(f){}}});String.prototype.jgFuncConvertToColumnRegexp=(function(){return new RegExp("\\#\\#("+this+")\\#\\#","gi");});String.prototype.jgFuncReplaceRegexpByDataset=(function(h,g){var j=this;j=j.replace("dataset\\.rowIndex".jgFuncConvertToColumnRegexp(),"("+g+")");j=j.replace("dataset\\.rowStatus".jgFuncConvertToColumnRegexp(),"("+h.getRowStatus(g)+")");var m=h.getColumnCount();for(var i=0;i<m;++i){var f=h.getColumn(i);var l=f.getName();var k=h.getColumnValue(l,g);j=j.replace(l.jgFuncConvertToColumnRegexp(),Object.NVL(k,""));}return j;});b.prototype._customFunctionConverter=(function(k,h){var j=k.indexOf(b.prototype.STR_MAP_FXCHAR);if(j>=0){k=k.substring(k.indexOf(":")+1,k.length);k=k.jgFuncReplaceRegexpByDataset(this,h);try{return new Function("return ("+k+");").apply(this);}catch(i){try{var g=new Function(k+";").apply(this);return Object.NVL(g,"");}catch(f){return"##fx error : "+f.toString()+"##";}}}else{return undefined;}});b.prototype.mapping=(function(f){this._mappingTarget=$(f);this._mappingRowContents=this._mappingTarget.contents().clone(true);this.reloadMappingElements();});b.prototype.reloadMappingElements=(function(){if(Object.isNull(this._mappingTarget)){return;}this._mappingTarget.empty();this._mappingElementsList.removeAll();this._mappingFxElementsList.removeAll();this._mappingRowList.removeAll();var g=this.getRowCount();for(var f=0;f<g;++f){this._addMappingElements(f);}});b.prototype._addMappingElements=(function(w){if(Object.isNull(this._mappingTarget)){return;}var i=this;var l=$("<div />").append(this._mappingRowContents.clone(true));var f=new Array();var p=l.find("*["+b.prototype.STR_MAP_COLUMNNAME+"]");var x=p.length;for(var k=0;k<x;++k){f.push($(p[k]));}var r=(function(B,A,z){this.push({name:B,type:A,fx:z});});var q=new Array();p=l.find("*");$.each(p,function(D){var C=$(this);var A=new Array();var F=C[0].attributes;var B=F.length;for(var D=0;D<B;++D){var z=F[D];if(z.name!==b.prototype.STR_MAP_COLUMNNAME&&Object.NVL(z.value,"").indexOf(b.prototype.STR_MAP_FXCHAR)==0){r.apply(A,[z.name,0,z.value]);}}var E=C.text();if(C.children().length==0&&Object.NVL(E,"").indexOf(b.prototype.STR_MAP_FXCHAR)>=0){r.apply(A,[null,1,E]);}if(A.length>0){C.jgMappedFxDefs=A;q.push(C);}});this._mappingElementsList.insert(f,w);this._mappingFxElementsList.insert(q,w);var h=f.length;for(var k=0;k<h;++k){var y=f[k];y.data("jgColumnMappingElemets",f);var o=y.prop("tagName").toLowerCase();var v=(function(z){var C=$(z.target);var B=C.attr(b.prototype.STR_MAP_COLUMNNAME);var A=i._mappingElementsList.indexOf(C.data("jgColumnMappingElemets"));if(B.indexOf(":")>=0){return;}i.setColumnValue(B,A,C.val());});if(o==="input"){var g=Object.NVL(y.attr("type"),"text");if(g=="checkbox"){y.on("click",function(z){var B=$(z.target);var A=i._mappingElementsList.indexOf(B.data("jgColumnMappingElemets"));i.setColumnValue(B.attr(b.prototype.STR_MAP_COLUMNNAME),A,this.checked);});}else{y.on("keyup change",v);}}else{if(o==="textarea"){y.on("keyup change",v);}else{if(o==="div"&&y.prop("contenteditable")){y.on("change",function(z){var C=$(z.target);var B=C.attr(b.prototype.STR_MAP_COLUMNNAME);var A=i._mappingElementsList.indexOf(C.data("jgColumnMappingElemets"));if(B.indexOf(":")>=0){return;}i.setColumnValue(B,A,C.html());});y.on("keyup",function(z){var A=$(z.target);A.trigger("change");});}else{if(o==="select"){y.on("change",v);var t=y.attr(b.prototype.STR_MAP_BINDDATASET);var u=y.attr(b.prototype.STR_MAP_DISPLAYCOLUMNNAME);var s=y.attr(b.prototype.STR_MAP_VALUECOLUMNNAME);if(!Object.isNull(t)&&!Object.isNull(u)&&!Object.isNull(u)){d(t).addSelectForAutoFill(y,u,s);}}else{}}}}}var j=f.length;for(var k=0;k<j;++k){var y=f[k];this._refreshColumnMappingElements(y.attr(b.prototype.STR_MAP_COLUMNNAME),w,(k==0));}var m=$(l.contents());var n=(function(F){var H=F.length;for(var C=0;C<H;++C){var z=F[C];var G=$(F[C]);if(z.nodeType===1){n(G.contents());var B=z.attributes;var E=B.length;for(var D=0;D<E;++D){B[D].value=(B[D].value.jgFuncReplaceRegexpByDataset(i,w));}}else{var A=G.text();if(A.length>0){z.data=(A.jgFuncReplaceRegexpByDataset(i,w));}}}});n(m);this._mappingRowList.insert(m,w);this._mappingTarget.insertAtIndex(m,w);if(!Object.isNull($.mobile)){m.trigger("create");}this._mappingTarget.trigger("datasetrowmapped",[w]);});b.prototype._removeMappingElements=(function(f){if(Object.isNull(this._mappingTarget)){return;}this._mappingElementsList.remove(f);this._mappingFxElementsList.remove(f);this._mappingRowList[f].remove();this._mappingRowList.remove(f);});b.prototype._updateMappingElements=(function(f){if(Object.isNull(this._mappingTarget)){return;}this._removeMappingElements(f);this._addMappingElements(f);});b.prototype._refreshColumnMappingElements=(function(o,q,h){if(Object.isNull(this._mappingTarget)){return;}h=Object.NVL(h,true);var i=(function(u,v){var w=u.prop("tagName").toLowerCase();if(w=="input"&&u.attr("type")=="checkbox"){if(u.attr("checked")!==v){u.attr("checked",v);}}else{if(w=="select"){if(u.val()!==v){u.val(v);try{u.trigger("refresh",true);}catch(t){}}}else{if(w=="p"||w=="span"||w=="div"||w=="label"){v=Object.NVL(v,"");if(u.html()!==v){u.html(v);}}else{if(u.val()!==v){u.val(v);}}}}});var f=this._getMappingElement(o,q);var j=this.getColumnValue(o,q);var p=f.length;for(var k=0;k<p;++k){var s=f[k];i(s,j);}f=this._mappingFxElementsList[q];if(h&&!Object.isNull(f)){p=f.length;for(var k=0;k<p;++k){var s=f[k];var r=s.jgMappedFxDefs;var n=r.length;for(var m=0;m<n;++m){var g=r[m];var l=this._customFunctionConverter(g.fx,q);if(l===undefined){continue;}if(g.type==0){s.attr(g.name,l);}else{s.text(l);}}}}});b.prototype._getMappingElement=(function(j,h){var k=new Array();var f=this._mappingElementsList[h];var g=f.length;for(var i=0;i<g;++i){if(f[i].attr(b.prototype.STR_MAP_COLUMNNAME).toUpperCase()==j.toUpperCase()){k.push(f[i]);}}return k;});b.prototype.exportModifiedData=(function(){var g=new b();g._columnInfo=this._columnInfo.clone();g._deletedRowData=this._deletedRowData.clone();var k=this.getColumnCount();var j=this.getRowCount();for(var f=0;f<j;++f){for(var h=0;h<k;++h){var i=this._columnInfo[h].name;if(this.isColumnModified(i,f)){g._rowData.push(this._rowData[f]);break;}}}return g;});var d=c.JGDS=(function(f,g){if(Object.isNull(f)){return null;}var h=c.JGDS._datasetMap[($.type(f)==="string"?c.JGDS.indexOfDataset(f):f)];if(!Object.isNull(h)){return h.dataset;}if($.type(f)==="string"){dataset_=new b(g);c.JGDS._datasetMap.push({name:f,dataset:dataset_});return dataset_;}});d._datasetMap=new Array();d.countOfDataset=(function(){return d._datasetMap.length;});d.indexOfDataset=(function(g){var f=d._datasetMap.length;for(var h=0;h<f;++h){var i=d._datasetMap[h];if($.type(g)==="string"){if(i.name==g){return h;}}else{if(i.dataset==g){return h;}}}return -1;});d.nameOfDataset=(function(f){var g=d.indexOfDataset(f);if(g>=0){return d._datasetMap[g].name;}return null;});d.make=(function(){if(Object.isNull(arguments)){return null;}var g=new Array();var f=arguments.length;for(var h=0;h<f;++h){g.push(d(arguments[h]));}return g;});d.remove=(function(f){d._datasetMap.remove(($.type(f)==="string"?d.indexOfDataset(f):f));});b.prototype.STR_ROOT="root";b.prototype.STR_ROW="row";b.prototype.STR_COLUMN="col";b.prototype.STR_COLUMNINFO="columninfo";b.prototype.STR_ROWDATA="rowdata";b.prototype.STR_ROWDATA_DELETED="deletedRowdata";b.prototype.STR_NAME="name";b.prototype.STR_ISKEY="isKey";b.prototype.STR_VALUE="value";b.prototype.STR_ROWSTATUS="status";b.prototype.STR_MODIFY="modify";b.prototype.STR_MAP_COLUMNNAME="jg-column";b.prototype.STR_MAP_BINDDATASET="jg-bind-dataset";b.prototype.STR_MAP_DISPLAYCOLUMNNAME="jg-display-column";b.prototype.STR_MAP_VALUECOLUMNNAME="jg-value-column";b.prototype.STR_MAP_FXCHAR="##fx:";b.prototype._defaultTriggerKey_whenRowInserted="rowinserted";b.prototype._defaultTriggerKey_whenRowRemoved="rowremoved";b.prototype._defaultTriggerKey_whenColumnAdded="columninserted";b.prototype._defaultTriggerKey_whenColumnRemoved="columnremoved";b.prototype._defaultTriggerKey_whenColumValueChanged="columnchanged";b.prototype._defaultTriggerKey_whenDatasetClear="datasetclear";b.prototype._defaultTriggerKey_whenDatasetReset="datasetreset";b.prototype._defaultTriggerKey_whenDatasetChanged="datasetchanged";b.prototype._customTriggerKey_whenRowInserted="_jgRowInserted";b.prototype._customTriggerKey_whenRowRemoved="_jgRowRemoved";b.prototype._customTriggerKey_whenColumnAdded="_jgColumnAdded";b.prototype._customTriggerKey_whenColumnRemoved="_jgColumnRemoved";b.prototype._customTriggerKey_whenColumValueChanged="_jgColumnValueChanged";b.prototype._customTriggerKey_whenDatasetClear="_jgDatasetClear";b.prototype._customTriggerKey_whenDatasetReset="_jgDatasetReset";b.prototype._customTriggerKey_whenDatasetChanged="_jgDatasetChanged";b.prototype._customMappingJQKey_bindedDataset="JGDataset.bindedDataset";b.prototype._customMappingJQKey_bindedElement="JGDataset.bindedElement";b.prototype._customMappingJQKey_bindedRowIndex="JGDataset.bindedRowIndex";b.prototype.fillOptionToSelect=(function(j,i,m){var g=null;var k=j.children("option[selected]");if(k.length!==0){g=k.val();}j.children().remove();var n=(function(r,q){return $("<option "+Object.NVL2(q,"value='"+q+"'","")+">"+r+"</option>");});var o=this.getRowCount();for(var p=0;p<o;++p){var h=this.getColumnValue(i,p);var l=this.getColumnValue(m,p);j.append(n(h,l));}var f=j.children("option[value='"+g+"']");if(!Object.isNull(g)&&f.length>0){f.attr("selected",true);}return j;});$.fn.JGMappingDataset=(function(f){f=Object.NVL(f,this.attr("jg-dataset"));if(Object.isNull(f)){console.error("dataset not defined");return;}var g=d(f);g.mapping(this);});$.fn.JGIsMapped=(function(f){f=Object.NVL(f,this.attr("jg-dataset"));if(Object.isNull(f)){return false;}var g=d(f);return !Object.isNull(g._mappingTarget);});$(document).on(Object.NVL2($.mobile,"pagebeforecreate","ready"),function(){$(d).trigger("beforeload");var f=$(document).find("[jg-dataset]");f.each(function(h){var g=$(this);g.JGMappingDataset();});$(d).trigger("afterload");});})(window);